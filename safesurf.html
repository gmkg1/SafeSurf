<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeSurf Browser</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- Keep your existing CSS exactly --- */
        * {margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
        body {background:linear-gradient(135deg,#1a2a6c,#b21f1f,#fdbb2d);
        color:#333;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;}
        .container {width:100%;max-width:1200px;background:white;
        border-radius:15px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.2);}
        .browser-header {background:#2c3e50;color:white;padding:15px 20px;
        display:flex;align-items:center;justify-content:space-between;}
        .logo {display:flex;align-items:center;
        gap:10px;}
        .logo-icon {font-size:24px;color:#3498db;}
        .logo-text {font-size:20px;font-weight:bold;}
        .url-container {background:white;padding:20px;border-bottom:1px solid #eee;}
        .url-input-group {display:flex;gap:10px;}
        .url-input {flex:1;padding:12px 15px;border:2px solid #ddd;border-radius:24px;font-size:16px;outline:none;transition:border-color 0.3s;}
        .url-input:focus {border-color:#3498db;}
        .nav-btn {width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#f1f1f1;color:#2c3e50;border:none;cursor:pointer;transition:all 0.3s;}
        .nav-btn:hover {background:#3498db;color:white;}
        .browser-content {display:flex;height:500px;}
        .sidebar {width:300px;background:#f8f9fa;padding:20px;border-right:1px solid #eee;overflow-y:auto;}
        .section-title {font-size:14px;text-transform:uppercase;color:#7f8c8d;margin-bottom:15px;letter-spacing:1px;}
        .security-status, .scan-section {background:white;border-radius:8px;padding:15px;margin-bottom:20px;box-shadow:0 2px 5px rgba(0,0,0,0.05);}
        .status-item {display:flex;align-items:center;margin-bottom:10px;}
        .status-icon {width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:10px;font-size:12px;}
        .status-active {background:#2ecc71;color:white;}
        .status-inactive {background:#e74c3c;color:white;}
        .scan-btn {width:100%;padding:10px;background:#3498db;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:background 0.3s;}
        .scan-btn:hover {background:#2980b9;}
        .scan-results {margin-top:15px;max-height:200px;overflow-y:auto;}
        .result-item {padding:8px;border-bottom:1px solid #eee;font-size:14px;}
        .safe {color:#2ecc71;}
        .suspicious {color:#f39c12;}
        .malicious {color:#e74c3c;}
        .webview-container {flex:1;position:relative;background:white;}
        .webview {width:100%;height:100%;border:none;}
        .webview-loading {position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:white;}
        .loading-spinner {width:50px;height:50px;border:5px solid #f3f3f3;border-top:5px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px;}
        @keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
        .download-modal {position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:1000;}
        .modal-content {background:white;border-radius:8px;padding:20px;width:90%;max-width:500px;box-shadow:0 4px 20px rgba(0,0,0,0.15);}
        .modal-header {display:flex;align-items:center;margin-bottom:15px;}
        .modal-icon {font-size:24px;margin-right:10px;}
        .modal-title {font-size:18px;font-weight:bold;}
        .modal-body {margin-bottom:20px;}
        .file-info {background:#f8f9fa;padding:10px;border-radius:4px;margin:10px 0;}
        .hash-display {font-family:monospace;background:#eee;padding:5px;border-radius:3px;word-break:break-all;font-size:12px;margin:5px 0;}
        .modal-buttons {display:flex;justify-content:flex-end;gap:10px;}
        .modal-btn {padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:500;}
        .btn-primary {background:#3498db;color:white;border:none;}
        .btn-secondary {background:#95a5a6;color:white;border:none;}
        .instructions {background:#f8f9fa;padding:20px;border-top:1px solid #eee;}
        .instructions h3 {margin-bottom:15px;color:#2c3e50;}
        .instructions ul {padding-left:20px;margin-bottom:15px;}
        .instructions li {margin-bottom:8px;line-height:1.5;}
        .tip {background:#fff4e6;padding:10px 15px;border-radius:8px;border-left:4px solid #fd7e14;}
        @media (max-width:768px){.browser-content{flex-direction:column;height:700px;}.sidebar{width:100%;height:200px;border-right:none;border-bottom:1px solid #eee;}.url-input-group{flex-direction:column;}.nav-buttons{display:flex;justify-content:center;gap:10px;}}
    </style>
</head>
<body>
    <div class="container">
        <div class="browser-header">
            <div class="logo">
                <i class="fas fa-shield-alt logo-icon"></i>
                <span class="logo-text">SafeSurf Browser</span>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn" id="backBtn" title="Back"><i class="fas fa-arrow-left"></i></button>
                <button class="nav-btn" id="forwardBtn" title="Forward"><i class="fas fa-arrow-right"></i></button>
                <button class="nav-btn" id="refreshBtn" title="Refresh"><i class="fas fa-sync-alt"></i></button>
            </div>
        </div>
        <div class="url-container">
            <div class="url-input-group">
                <input type="text" class="url-input" id="urlInput" placeholder="Enter website URL (e.g., https://example.com)" value="https://www.wikipedia.org">
                <button class="nav-btn" id="goBtn" title="Go"><i class="fas fa-search"></i></button>
            </div>
        </div>
        <div class="browser-content">
            <div class="sidebar">
                <h3 class="section-title">Security Status</h3>
                <div class="security-status" id="securityStatus">
                    <div class="status-item"><div class="status-icon status-active"><i class="fas fa-check"></i></div><div>Real-time Protection</div></div>
                    <div class="status-item"><div class="status-icon status-active"><i class="fas fa-check"></i></div><div>Passive Scanning</div></div>
                    <div class="status-item"><div class="status-icon status-active"><i class="fas fa-check"></i></div><div>Malware Detection</div></div>
                    <div class="status-item"><div class="status-icon status-active"><i class="fas fa-check"></i></div><div>NSFW Block</div></div>
                    <div class="status-item"><div class="status-icon status-active"><i class="fas fa-check"></i></div><div>Contextual AI Moderation</div></div>
                    <div class="status-item"><div class="status-icon status-active"><i class="fas fa-check"></i></div><div>Google Safe Browsing</div></div>
                </div>

                <h3 class="section-title">Passive Scanning</h3>
                <div class="scan-section">
                    <p>Scan files & URLs in real-time</p>
                    <button class="scan-btn" id="scanBtn">Scan Downloads & Current Page</button>
                    <div class="scan-results" id="scanResults">
                        <div class="result-item safe">Last scan: 5 files checked, 0 threats found</div>
                    </div>
                </div>

                <h3 class="section-title">Download Monitor</h3>
                <div class="scan-section">
                    <div id="downloadList"><div class="result-item">No recent downloads</div></div>
                </div>
            </div>

            <div class="webview-container">
                <div class="webview-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading webpage...</p>
                </div>
                <iframe class="webview" id="webview" src="https://www.wikipedia.org"></iframe>
            </div>
        </div>

        <div class="instructions">
            <h3>How Passive Scanning Works:</h3>
            <ul>
                <li><strong>Hash-based detection:</strong> Files checked against malware signatures</li>
                <li><strong>URL scanning:</strong> Google Safe Browsing checks</li>
                <li><strong>NSFW block:</strong> Detects nudity & inappropriate content in images</li>
                <li><strong>Contextual AI:</strong> Detects hate speech, phishing & unsafe content on pages</li>
                <li><strong>Low resource usage:</strong> Passive scanning does not slow down your system</li>
            </ul>
            <div class="tip"><strong>Tip:</strong> Always download files from trusted sources. SafeSurf enhances safety in real-time.</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const webview = document.getElementById('webview');
            const urlInput = document.getElementById('urlInput');
            const goBtn = document.getElementById('goBtn');
            const backBtn = document.getElementById('backBtn');
            const forwardBtn = document.getElementById('forwardBtn');
            const refreshBtn = document.getElementById('refreshBtn');
            const scanBtn = document.getElementById('scanBtn');
            const scanResults = document.getElementById('scanResults');
            const downloadList = document.getElementById('downloadList');

            // Mock malware DB
            const mockMalwareDB = {
                'abc123def456': { name:'document.pdf', status:'safe', details:'No threats detected'},
                'mal456ware789': { name:'installer.exe', status:'malicious', details:'12 engines flagged as malware'},
                'sus012pic345': { name:'crack.zip', status:'suspicious', details:'4 engines flagged as suspicious'}
            };

            let downloadHistory = [];

            // Whitelist/Blacklist
            const blacklist = ['badwebsite.com','malware-site.net'];
            const whitelist = ['wikipedia.org','example.com'];

            // Navigate to URL
            function navigateTo(url){
                if(!url) return;
                if(!/^https?:\/\//i.test(url)) url='https://'+url;
                // Check blacklist
                if(blacklist.some(b=>url.includes(b))){alert('Blocked by blacklist');return;}
                webview.src=url; urlInput.value=url; showLoading();
                // Simulate contextual AI & Safe Browsing
                setTimeout(()=>{scanCurrentPage(url)},1000);
            }

            function showLoading(){
                document.querySelector('.webview-loading').style.display='flex';
            }
            function hideLoading(){
                document.querySelector('.webview-loading').style.display='none';
            }

            // Simulate downloads
            function simulateDownload(){
                const files = [
                    {name:'document.pdf',hash:'abc123def456',size:'2.4 MB'},
                    {name:'installer.exe',hash:'mal456ware789',size:'5.1 MB'},
                    {name:'crack.zip',hash:'sus012pic345',size:'8.7 MB'}
                ];
                const file = files[Math.floor(Math.random()*files.length)];
                handleFileDownload(file);
            }

            function handleFileDownload(file){
                downloadHistory.unshift({name:file.name,hash:file.hash,size:file.size,time:new Date().toLocaleTimeString(),status:'pending'});
                updateDownloadList();
                setTimeout(()=>{
                    const result = mockMalwareDB[file.hash]||{status:'safe',details:'File not in DB'};
                    const downloadItem = downloadHistory.find(d=>d.hash===file.hash);
                    if(downloadItem){downloadItem.status=result.status;downloadItem.details=result.details;}
                    updateDownloadList();
                },1500);
            }

            function updateDownloadList(){
                downloadList.innerHTML='';
                if(downloadHistory.length===0){downloadList.innerHTML='<div class="result-item">No recent downloads</div>';return;}
                downloadHistory.forEach(d=>{
                    let icon=''; if(d.status==='safe') icon='<i class="fas fa-check-circle"></i>';
                    if(d.status==='suspicious') icon='<i class="fas fa-exclamation-triangle"></i>';
                    if(d.status==='malicious') icon='<i class="fas fa-times-circle"></i>';
                    if(d.status==='pending') icon='<i class="fas fa-spinner fa-spin"></i>';
                    const item=document.createElement('div');
                    item.className=`result-item ${d.status}`;
                    item.innerHTML=`${icon} ${d.name} - ${d.size} - ${d.time}`;
                    downloadList.appendChild(item);
                });
            }

            function simulateScan(){
                scanResults.innerHTML='<div class="result-item"><i class="fas fa-spinner fa-spin"></i> Scanning...</div>';
                setTimeout(()=>{
                    const safe=downloadHistory.filter(f=>f.status==='safe').length;
                    const suspicious=downloadHistory.filter(f=>f.status==='suspicious').length;
                    const malicious=downloadHistory.filter(f=>f.status==='malicious').length;
                    scanResults.innerHTML=`
                        <div class="result-item safe">Safe files: ${safe}</div>
                        <div class="result-item suspicious">Suspicious files: ${suspicious}</div>
                        <div class="result-item malicious">Malicious files: ${malicious}</div>
                    `;
                },1500);
            }

            // Simulate contextual AI + NSFW + Safe Browsing
            function scanCurrentPage(url){
                let messages=[];
                if(url.includes('hate')) messages.push('Hate speech detected');
                if(url.includes('phish')) messages.push('Phishing content detected');
                if(url.includes('nsfw')) messages.push('NSFW content detected');
                if(messages.length>0){
                    alert('SafeSurf Alert:\n'+messages.join('\n'));
                }
            }

            webview.addEventListener('load',()=>{hideLoading();if(Math.random()>0.5)setTimeout(simulateDownload,2000);});

            goBtn.addEventListener('click',()=>navigateTo(urlInput.value));
            urlInput.addEventListener('keypress',e=>{if(e.key==='Enter')navigateTo(urlInput.value);});
            backBtn.addEventListener('click',()=>{try{webview.contentWindow.history.back();}catch(e){}});
            forwardBtn.addEventListener('click',()=>{try{webview.contentWindow.history.forward();}catch(e){}});
            refreshBtn.addEventListener('click',()=>{webview.src=webview.src; showLoading();});
            scanBtn.addEventListener('click',simulateScan);

            showLoading();
        });
    </script>
</body>
</html>
